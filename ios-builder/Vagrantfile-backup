Vagrant.configure("2") do |config|
  config.vm.box = "ramsey/macos-catalina"
  config.vm.box_version = "1.0.0"

  config.vm.boot_timeout = 500

  config.vm.synced_folder ".", "/vagrant", disabled: true

   config.vm.provider "virtualbox" do |v|
     v.linked_clone = false
     # Display the VirtualBox GUI when booting the machine
     v.gui = true
  
     # Customize the amount of memory on the VM:
     v.memory = 8192
     v.cpus = 4

     v.name = "ios-builder"

     v.customize ["modifyvm", :id, "--usb", "off"]
     v.customize ["modifyvm", :id, "--usbohci", "off"]
     v.customize ["modifyvm", :id, "--usbxhci", "off"]
   end

   config.vm.provision :shell do |shell|
      shell.privileged = true
      shell.inline = 'softwareupdate --list && softwareupdate --install "macOS Catalina 10.15.7 Update- " --restart'
      # shell.reboot = true
  end
   config.vm.provision :shell do |shell|
      shell.privileged = true
      shell.inline = 'softwareupdate --list'
      # shell.reboot = true
  end
end
